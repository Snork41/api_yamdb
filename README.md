# api_yamdb
(учебный проект 10 спринта курса Python-разработчик от Яндекс.Практикум)
### Описание:
Проект YaMDb собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Например, в категории «Книги» могут быть произведения «Винни-Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Жуки» и вторая сюита Баха. Список категорий может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»). 
Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). 
Добавлять произведения, категории и жанры может только администратор.
Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти. Из оценок формируется рейтинг. 

### Технологии:
Python 3.9
Django 3.2
DRF 3.12
JWT

### Установка:
- Клонируйте репозиторий и перейдите в него в командной строке.

- Cоздайте и активируйте виртуальное окружение (версия Python должна быть не меньше 3.9):
    ```
    python -m venv venv
     ```
    ```
    source venv/Scripts/activate
     ```
- Установите зависимости из файла __requirements.txt__ :
    ```
    pip install -r requirements.txt
    ````
- Выполните миграции::
    ```
    python manage.py migrate
    ```
- При желании заполните базу готовыми данными:
    ```
    python manage.py csv-in-bd
    ```
- Создайте суперпользователя и поменяйте ему роль на admin (в админке)
    ```
    python manage.py createsuperuser
    ```
- Запустите проект:

    ```
    python3 manage.py runserver
    ```
- __Документация API__ доступна по адресу http://127.0.0.1:8000/redoc/

### Пользовательские роли и права доступа
- __Аноним__ — может просматривать описания произведений, читать отзывы и комментарии.
- __Аутентифицированный пользователь__ (user) — может читать всё, как и Аноним, может публиковать отзывы и ставить оценки произведениям (фильмам/книгам/песенкам), может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
- __Модератор__ (moderator) — те же права, что и у Аутентифицированного пользователя, плюс право удалять и редактировать любые отзывы и комментарии.
- __Администратор__ (admin) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.

### Самостоятельная регистрация новых пользователей
- Пользователь отправляет POST-запрос с параметрами email и username на эндпоинт ```/api/v1/auth/signup/```.
- Сервис YaMDB отправляет письмо с кодом подтверждения (confirmation_code) на указанный адрес email.
- Пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт ```/api/v1/auth/token/```, в ответе на запрос ему приходит token (JWT-токен).
- В результате пользователь получает токен и может работать с API проекта, отправляя этот токен с каждым запросом. 
- После регистрации и получения токена пользователь может отправить PATCH-запрос на эндпоинт ```/api/v1/users/me/``` и заполнить поля в своём профайле (описание полей — в документации).

### Создание пользователя администратором
- Пользователей создаёт администратор — через админ-зону сайта или через POST-запрос на специальный эндпоинт ```api/v1/users/ ``` (описание полей запроса для этого случая есть в документации). При создании пользователя не предполагается автоматическая отправка письма пользователю с кодом подтверждения. 
- После этого пользователь должен самостоятельно отправить свой email и username на эндпоинт  ```/api/v1/auth/signup/ ```, в ответ ему должно прийти письмо с кодом подтверждения.
- Далее пользователь отправляет POST-запрос с параметрами username и confirmation_code на эндпоинт  ```/api/v1/auth/token/ ```, в ответе на запрос ему приходит token (JWT-токен), как и при самостоятельной регистрации.

---
#### Авторы проекта:
- [Максим Давлеев](https://github.com/Snork41)
- [Светлана Фадеева](https://github.com/svetlanaalefadeeva)
- [Шамиль Хамидуллин](https://github.com/skhfh)
